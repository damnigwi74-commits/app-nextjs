{
	"type": "input",
	"name": "login",
	"next": "client-page",
	"save-as": "pin",
	"save-to-account-details": "pin",
	"authenticate": true,
	"validation": [
		{
			"name": "matchesLength",
			"type": "joi",
			"arguments": "length=4"
		},
		{
			"name": "isValidPin",
			"type": "custom"
		}
	],
	"errors": [
		"invalid-pin-length-error",
		"invalid-pin-error",
		"wrong-login"
	],
	"action": "update-parameters",
	"external-fetch": {
		"route": "login",
		"success": "client-page",
		"success-handler": {
			"handler": "reset_pin_trials",
			"argument": "pin-trials-remaining",
			"save-as": "pin-trials-remaining"
		},
		"error": "wrong-login",
		"error-handler": {
			"handler": "decrement_pin_trials",
			"argument": "pin-trials-remaining",
			"save-as": "pin-trials-remaining"
		},
		"cache": true,
		"cache-path": "account-details",
		"cache-parameters": [
			{
				"path": "access_token",
				"save-as": "access_token"
			}
		]
	}
}