[
	{
		"type": "skip",
		"name": "fetch-loan-limit",
		"action": "update-parameters",
		"external-fetch": {
			"route": "fetch-loan-limit",
			"success": "loan-application-type-options",
			"error": "api-error",
			"cache": true,
			"cache-path": "global-request-details",
			"cache-parameters": [
				{
					"path": "data.limit",
					"save-as": "limit",
					"default": "0"
				},
				{
					"path": "data.limit",
					"save-as": "loan-amount-options",
					"format-as": "formatLoanLimitAccount"
				}
			],
			"parameter-checks": {
				"loan-amount-options": {
					"is-less-than": "1",
					"redirect-to": "loan-application-options-error"
				}
			}
		}
	},
	{
		"type": "select",
		"name": "loan-application-type-options",
		"save-as": "borrowAmount",
		"format-as":"formatLoanLimitMinimumAmount",
		"options": "loan-amount-options",
		"options-error": "loan-application-options-error",
		"error": "loan-application-type-options-error",
		"previous": "client-page",
		"next": "loan-application-confirm"
	},
	{
		"type": "input",
		"name": "loan-application-amount",
		"save-as": "borrowAmount",
		"validation": [
			{
				"name": "isWithinLoanLimit",
				"type": "custom",
				"arguments": "min=%@minLoanAmount, max=%@limit"
			}
		],
		"error": "loan-application-amount-error",
		"previous": "client-page",
		"next": "loan-application-confirm"
	},
	{
		"type": "select",
		"name": "loan-application-confirm",
		"options": "confirm-options",
		"error": "loan-application-confirm-error",
		"action": "transact",
		"external-fetch": {
			"route": "loan-application",
			"success": "api-success",
			"error": "api-error"
		},
		"on-cancel": "client-page",
		"previous": "loan-application-amount"
	},
	{
		"type": "select",
		"name": "loan-application-error",
		"options": "yes-no-options",
		"error": "loan-application-error-error",
		"action": "navigate",
		"on-accept": "client-page",
		"on-cancel": "logout"
	},
	{
		"type": "select",
		"name": "loan-application-options-error",
		"options": "yes-no-options",
		"error": "loan-application-options-error-error",
		"action": "navigate",
		"on-accept": "client-page",
		"on-cancel": "logout"
	}
]