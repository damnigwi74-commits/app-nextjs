[
    {
        "type": "skip",
        "name": "fetch-employee-info-loan-limit",
        "action": "update-parameters",
        "external-fetch": {
            "route": "fetch-loan-limit",
            "success": "loan-limit-sucess",
            "error": "loan-limit-error",
            "cache": true,
            "cache-path": "global-request-details",
            "cache-parameters": [
                {
                    "path": "data.limit",
                    "save-as": "limit",
                    "default": "0"
                },
                {
                    "path": "data.limit",
                    "save-as": "loan-amount-options",
                    "format-as": "formatLoanLimitAccount"
                }
            ],
            "parameter-checks": {
                "loan-amount-options": {
                    "is-less-than": "1",
                    "redirect-to": "loan-limit-error"
                }
            }
        },
        "on-cancel": "client-page",
        "previous": "loans-page"
    },
    {
        "type"          : "select",
        "name"          : "loan-limit-sucess",
        "options"  		: "yes-no-options",
        "error"         : "loan-limit-sucess-error",
        "action"    	: "navigate",
        "on-accept" 	: "client-page",
        "on-cancel" 	: "logout"
    },
   
    {
        "type": "input",
        "name": "loan-limit-amount",
        "save-as": "borrowAmount",
        "validation": [
            {
                "name": "isAmount",
                "type": "joi",
                "arguments": "min=100"
            }
        ],
        "error": "loan-limit-amount-error",
        "previous": "loan-limit-sucess",
        "next": "loan-limit-apply-confirm"
    },
    {
        "type": "select",
        "name": "loan-limit-apply-confirm",
        "options": "confirm-options",
        "error": "loan-limit-apply-confirm-error",
        "action": "transact",
        "external-fetch": {
            "route": "loan-application",
            "success": "api-success",
            "error": "api-error"
        },
        "on-cancel": "client-page",
        "previous": "loans-amount"
    },
    {
        "type": "select",
        "name": "loan-limit-confirm",
        "options": "confirm-options",
        "previous": "client-page",
        "action": "update-parameters",
        "external-fetch": {
            "route": "fetch-loan-limit",
            "success": "loan-limit-sucess",
            "error": "loan-limit-error",
            "cache": true,
            "cache-path": "global-request-details",
            "cache-parameters": [
                {
                    "path": "data.limit",
                    "save-as": "limit",
                    "default": "0"
                }
            ]
        },
        "on-cancel": "client-page",
        "error": "loan-limit-confirm-error"
    }
]