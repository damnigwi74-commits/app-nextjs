{
    "wrong-login": {
        "type": "input",
        "name": "wrong-login",
        "save-as": "user-pin",
        "next": "client-page",
        "validation": [
            {
                "name": "matchesLength",
                "type": "joi",
                "arguments": {
                    "length": 4
                }
            },
            {
                "name": "isNumber",
                "type": "joi"
            },
            {
                "name": "isValidPin",
                "type": "custom"
            }
        ],
        "errors": [
            "invalid-login-pin-length-error",
            "invalid-login-pin-error",
            "invalid-login"
        ],
        "action": "update-parameters",
        "external-fetch": {
            "route": "db-login-authentication",
            "success": "client-page",
            "error": "wrong-login",
            "cache": true,
            "cache-path": "account-details",
            "cache-parameters": [
                {
                    "path": "data.data.accessToken",
                    "save-as": "accessToken",
                    "format-as": ""
                },
                {
                    "path": "data.data.username",
                    "save-as": "firstname",
                    "format-as": ""
                },
                {
                    "path": "data.data.email",
                    "save-as": "email",
                    "format-as": ""
                }
            ]
        },
        "error": "wrong-login"
    },
    "pin-change": [
        {
            "type": "input",
            "name": "pin-change-old-pin",
            "save-as": "oldPin",
            "validation": [
                {
                    "name": "isValidPin",
                    "type": "custom"
                }
            ],
            "error": "pin-change-wrong-old-pin-error",
            "previous": "settings-page",
            "next": "pin-change-new-pin"
        },
        {
            "type": "input",
            "name": "pin-change-new-pin",
            "save-as": "newPin",
            "validation": [
                {
                    "name": "isStrongPin",
                    "type": "custom"
                },
                {
                    "name": "isNotEqualToLastEntry",
                    "type": "custom",
                    "arguments": {
                        "path": "oldPin"
                    }
                }
            ],
            "errors": [
                "pin-change-new-pin-error",
                "pin-change-new-pin-not-last-entry-error"
            ],
            "previous": "pin-change-old-pin",
            "next": "pin-change-new-pin-reenter"
        },
        {
            "type": "input",
            "name": "pin-change-new-pin-reenter",
            "save-as": "newsPin",
            "validation": [
                {
                    "name": "isEqualToLastEntry",
                    "type": "custom",
                    "arguments": {
                        "path": "newPin"
                    }
                }
            ],
            "error": "pin-change-new-pin-reenter-error",
            "previous": "pin-change-new-pin",
            "next": "pin-change-confirm"
        },
        {
            "type": "select",
            "name": "pin-change-confirm",
            "options": "confirm-options",
            "error": "pin-change-confirm-error",
            "authenticate": false,
            "action": "transact",
            "external-fetch": {
                "route": "change_pin",
                "success": "pin-change-success",
                "error": "pin-change-error"
            },
            "on-cancel": "settings-page",
            "previous": "pin-change-new-pin-reenter"
        }
    ],
    "email-change": [
        {
            "type": "input",
            "name": "email-change-current-email",
            "validation": [
                {
                    "name": "isValidEmail",
                    "type": "custom"
                },
                {
                    "name": "isCurrentEmail",
                    "type": "custom"
                }
            ],
            "errors": [
                "email-change-invalid-email-error",
                "email-change-wrong-email-error"
            ],
            "previous": "settings-page"
        },
        {
            "type": "input",
            "name": "email-change-new-email",
            "save-as": "new-email",
            "validation": [
                {
                    "name": "isValidEmail",
                    "type": "custom"
                }
            ],
            "error": "email-change-invalid-new-email-error"
        },
        {
            "type": "select",
            "name": "email-change-confirm",
            "options": "confirm-options",
            "error": "email-change-confirm-error",
            "action": "transact",
            "external-fetch": {
                "api": "mock",
                "route": "email-change",
                "success": "email-change-success",
                "error": "email-change-error"
            },
            "on-cancel": "settings-page"
        }
    ],
    "invoice-payment-mode": {
        "type": "select",
        "name": "invoice-payment-mode-select",
        "options": [
            {
                "label": "Mobile Money",
                "value": "Mobile Money",
                "jump-to": ""
            }
        ],
        "error": "invoice-payment-mode-select-error",
        "next": "client-page"
    },
    "first-login": [
        {
            "type": "input",
            "name": "first-login-system-pin",
            "save-as": "oldPin",
            "validation": [
                {
                    "name": "isValidPin",
                    "type": "custom"
                },
                {
                    "name": "isCorrectPin",
                    "type": "custom"
                }
            ],
            "error": "wrong-system-pin-error",
            "next": "first-login-new-pin",
            "action": "update-parameters",
            "external-fetch": {
                "route": "verify-otp",
                "success": "first-login-new-pin",
                "error": "first-login-system-pin"
            }
        },
        {
            "type": "input",
            "name": "first-login-new-pin",
            "save-as": "newPin",
            "validation": [
                {
                    "name": "isStrongPin",
                    "type": "custom"
                }
            ],
            "error": "first-login-new-pin-error",
            "next": "first-login-new-pin-reenter",
            "previous": "first-login-system-pin"
        },
        {
            "type": "input",
            "name": "first-login-new-pin-reenter",
            "save-as": "newsPin",
            "validation": [
                {
                    "name": "isEqualToLastEntry",
                    "type": "custom",
                    "arguments": {
                        "path": "newPin"
                    }
                }
            ],
            "error": "first-login-new-pin-reenter-error",
            "next": "first-login-confirm",
            "previous": "first-login-new-pin"
        },
        {
            "type": "select",
            "name": "first-login-confirm",
            "options": "confirm-options",
            "error": "first-login-confirm-error",
            "on-cancel": "logout",
            "previous": "first-login-new-pin-reenter",
            "action": "transact",
            "external-fetch": {
                "route": "change_pin",
                "success": "pin-change-success",
                "error": "pin-change-error",
                "cache": false,
                "cache-path": "global-request-details",
                "cache-parameters": []
            }
        }
    ],
    "login": {
        "type": "input",
        "name": "login",
        "save-as": "user-pin",
        "error": "login-error",
        "next": "client-page",
        "validation": [
            {
                "type": "custom",
                "name": "matchesLength"
            },
            {
                "type": "custom",
                "name": "isNumber"
            },
            {
                "type": "custom",
                "name": "isValidPin"
            }
        ],
        "action": "update-parameters",
        "external-fetch": {
            "route": "db-login-authentication",
            "success": "client-page",
            "error": "wrong-login",
            "cache": true,
            "cache-path": "account-details",
            "cache-parameters": [
                {
                    "path": "data.access_token",
                    "save-as": "access_token",
                    "format-as": ""
                }
            ]
        }
    },
    "registration-success": {
        "type": "alert",
        "name": "registration-success"
    },
    "repay-overdraft": [
        {
            "type": "select",
            "name": "repay-overdraft-payment-options",
            "save-as": "paymentOption",
            "options": [
                {
                    "label": "Full Amount",
                    "value": "Full Amount",
                    "jump-to": "repay-overdraft-confirm-confirm"
                },
                {
                    "label": "Enter Amount",
                    "value": "Enter Amount",
                    "jump-to": "repay-overdraft-amount"
                }
            ],
            "error": "repay-overdraft-payment-options-error",
            "previous": "client-page",
            "next": "repay-overdraft-amount"
        },
        {
            "type": "input",
            "name": "repay-overdraft-amount",
            "save-as": "amount",
            "error": "repay-overdraft-amount-error",
            "previous": "repay-overdraft-payment-options",
            "next": "repay-overdraft-confirm-confirm",
            "validation": [
                {
                    "type": "custom",
                    "name": "isAmount"
                }
            ]
        },
        {
            "type": "select",
            "name": "repay-overdraft-confirm-confirm",
            "options": "confirm-options",
            "error": "repay-overdraft-confirm-confirm-error",
            "on-cancel": "client-page",
            "previous": "repay-overdraft-payment-options",
            "action": "transact",
            "external-fetch": {
                "route": "login",
                "success": "api-success",
                "error": "api-success",
                "cache": false,
                "cache-path": "global-request-details",
                "cache-parameters": []
            }
        }
    ],
    "registration-error": {
        "type": "alert",
        "name": "registration-error"
    },
    "terms": {
        "type": "select",
        "name": "terms",
        "options": "yes-no-options",
        "error": "terms-error",
        "action": "navigate",
        "on-accept": "registration-terms",
        "on-cancel": "registration-cancel"
    },
    "balance": [
        {
            "type": "select",
            "name": "balance-account",
            "save-as": "balanceDebitAccount",
            "options": "savings-accounts",
            "format-as": "balance-timestamp",
            "options-error": "balance-account-savings-options-error",
            "error": "balance-account-savings-error",
            "previous": "client-page",
            "next": "balance-confirm"
        },
        {
            "type": "select",
            "name": "balance-confirm",
            "options": "confirm-options",
            "previous": "balance-account",
            "charges": true,
            "authenticate": false,
            "action": "transact",
            "external-fetch": {
                "route": "balance",
                "success": "balance-success",
                "error": "api-error",
                "cache": true,
                "cache-path": "global-request-details",
                "cache-parameters": [
                    {
                        "path": "field54",
                        "save-as": "balance",
                        "format-as": "concat-balance"
                    },
                    {
                        "path": "field49",
                        "save-as": "currencyCode"
                    }
                ]
            },
            "on-cancel": "client-page",
            "error": "balance-confirm-error"
        },
        {
            "type": "select",
            "name": "balance-account-savings-options-error",
            "options": "yes-no-options",
            "error": "balance-account-savings-options-error-error",
            "action": "navigate",
            "on-accept": "client-page",
            "on-cancel": "logout",
            "previous": "balance-account"
        }
    ],
    "contact-us": {
        "type": "select",
        "name": "contact-us",
        "options": "yes-no-options",
        "error": "contact-us-error",
        "action": "navigate",
        "on-accept": "client-page",
        "on-cancel": "logout"
    },
    "registration-alert": {
        "name": "registration-alert",
        "type": "alert"
    },
    "coming-soon": {
        "type": "alert",
        "name": "coming-soon"
    },
    "language-change": [
        {
            "type": "select",
            "name": "language-change",
            "save-as": "selected_language",
            "options": "language-options",
            "error": "language-change-error",
            "previous": "settings-page",
            "next": "language-confirm"
        },
        {
            "type": "select",
            "name": "language-confirm",
            "options": "confirm-options",
            "error": "language-confirm-error",
            "action": "update-local",
            "local-path": "language=selected_language",
            "next": "client-page",
            "previous": "language-change"
        }
    ],
    "kplc-prepaid": [
        {
            "type": "input",
            "name": "kplc-prepaid-credit-account",
            "save-as": "billPaymentCreditAccount",
            "validation": [
                {
                    "name": "isNumber",
                    "type": "joi"
                }
            ],
            "format-as": "",
            "error": "kplc-prepaid-credit-account-error",
            "previous": "bill-payment-page",
            "next": "kplc-prepaid-debit-account"
        },
        {
            "type": "select",
            "name": "kplc-prepaid-debit-account",
            "save-as": "billPaymentDebitAccount",
            "options": "savings-accounts",
            "options-error": "kplc-prepaid-debit-account-options-error",
            "error": "kplc-prepaid-debit-account-error",
            "previous": "kplc-prepaid-credit-account",
            "next": "kplc-prepaid-amount"
        },
        {
            "type": "input",
            "name": "kplc-prepaid-amount",
            "save-as": "billPaymentAmount",
            "validation": [
                {
                    "name": "isAmount",
                    "type": "joi",
                    "arguments": {
                        "min": 1
                    }
                }
            ],
            "format-as": "",
            "error": "kplc-prepaid-amount-error",
            "previous": "kplc-prepaid-debit-account",
            "next": "kplc-prepaid-confirm"
        },
        {
            "type": "select",
            "name": "kplc-prepaid-confirm",
            "options": "confirm-options",
            "error": "kplc-prepaid-confirm-error",
            "on-cancel": "client-page",
            "previous": "kplc-prepaid-amount",
            "charges": true,
            "action": "transact",
            "external-fetch": {
                "route": "kplc-pre-paid-bill-payment",
                "success": "api-success",
                "error": "api-error",
                "cache": false,
                "cache-path": "global-request-details",
                "cache-parameters": []
            }
        },
        {
            "type": "select",
            "name": "kplc-prepaid-debit-account-options-error",
            "options": "yes-no-options",
            "error": "kplc-prepaid-debit-account-options-error-error",
            "action": "navigate",
            "on-accept": "client-page",
            "on-cancel": "logout",
            "previous": "kplc-prepaid-credit-account"
        }
    ],
    "account-blocked": {
        "type": "alert",
        "name": "account-blocked"
    },
    "kplc-postpaid": [
        {
            "type": "skip",
            "name": "fetch-kplc-postpaid-accounts",
            "action": "update-parameters",
            "external-fetch": {
                "route": "fetch-dormant-accounts",
                "success": "kplc-postpaid-debit-account",
                "error": "kplc-postpaid-debit-account",
                "cache": true,
                "cache-path": "global-request-details",
                "cache-parameters": [
                    {
                        "path": "data",
                        "save-as": "dormant-accounts",
                        "format-as": "dormant-accounts-activation"
                    }
                ]
            }
        },
        {
            "type": "select",
            "name": "kplc-postpaid-debit-account",
            "save-as": "billPaymentDebitAccount",
            "options": [
                {
                    "label": "Account 1",
                    "value": "Account 1"
                },
                {
                    "label": "Account 1",
                    "value": "Account 1"
                }
            ],
            "options-error": "kplc-postpaid-debit-account-options-error",
            "error": "kplc-postpaid-debit-account-error",
            "previous": "bill-payment-page",
            "next": "kplc-postpaid-credit-account"
        },
        {
            "type": "input",
            "name": "kplc-postpaid-credit-account",
            "save-as": "billPaymentCreditAccount",
            "validation": [
                {
                    "name": "isNumber",
                    "type": "joi"
                }
            ],
            "format-as": "",
            "error": "kplc-postpaid-credit-account-error",
            "previous": "kplc-postpaid-debit-account",
            "next": "kplc-postpaid-confirm",
            "action": "update-parameters",
            "external-fetch": {
                "route": "kplc-post-paid-bill-presentment",
                "success": "kplc-postpaid-amount",
                "error": "kplc-postpaid-amount",
                "cache": true,
                "cache-path": "global-request-details",
                "cache-parameters": [
                    {
                        "path": "field4",
                        "save-as": "billPaymentAmount"
                    },
                    {
                        "path": "field49",
                        "save-as": "customerName"
                    }
                ],
                "parameter-checks": {
                    "billPaymentAmount": {
                        "is-less-than": "0",
                        "redirect-to": "kplc-postpaid-presentment-amount-error"
                    }
                }
            }
        },
        {
            "type": "input",
            "name": "kplc-postpaid-amount",
            "save-as": "billPaymentAmount",
            "error": "kplc-postpaid-amount-error",
            "previous": "kplc-postpaid-credit-account",
            "next": "kplc-postpaid-confirm",
            "validation": [
                {
                    "type": "custom",
                    "name": "isAmount"
                }
            ]
        },
        {
            "type": "select",
            "name": "kplc-postpaid-confirm",
            "options": "confirm-options",
            "charges": true,
            "error": "kplc-postpaid-confirm-error",
            "action": "transact",
            "external-fetch": {
                "route": "kplc-post-paid-bill-payment",
                "success": "api-success",
                "error": "api-success"
            },
            "on-cancel": "client-page",
            "previous": "kplc-postpaid-amount"
        },
        {
            "type": "select",
            "name": "kplc-postpaid-debit-account-options-error",
            "options": "yes-no-options",
            "error": "kplc-postpaid-debit-account-options-error-error",
            "action": "navigate",
            "on-accept": "client-page",
            "on-cancel": "logout",
            "previous": "kplc-postpaid-credit-account"
        },
        {
            "type": "select",
            "name": "kplc-postpaid-presentment-error",
            "options": "yes-no-options",
            "error": "kplc-postpaid-presentment-error-error",
            "action": "navigate",
            "on-accept": "client-page",
            "on-cancel": "logout"
        },
        {
            "type": "select",
            "name": "kplc-postpaid-presentment-amount-error",
            "options": "yes-no-options",
            "error": "kplc-postpaid-presentment-amount-error-error",
            "action": "navigate",
            "on-accept": "client-page",
            "on-cancel": "logout"
        },
        {
            "type": "select",
            "name": "kplc-postpaid-presentment-amount-error",
            "options": "yes-no-options",
            "error": "kplc-postpaid-presentment-amount-error-error",
            "action": "navigate",
            "on-accept": "client-page",
            "on-cancel": "logout"
        }
    ],
    "logout": {
        "name": "logout",
        "type": "alert"
    },
    "api-error": {
        "type": "select",
        "name": "api-error",
        "options": "yes-no-options",
        "error": "api-error-error",
        "action": "navigate",
        "on-accept": "client-page",
        "on-cancel": "logout"
    },
    "tell-a-friend": [
        {
            "type": "input",
            "name": "tell-a-friend-number",
            "save-as": "friendPhoneNumber",
            "format-as": "international-mobile-number",
            "validation": [
                {
                    "name": "matchesLength",
                    "type": "joi",
                    "arguments": {
                        "length": 10
                    }
                },
                {
                    "name": "isNumber",
                    "type": "joi"
                }
            ],
            "errors": [
                "tell-a-friend-number-error",
                "tell-a-friend-number-error"
            ],
            "previous": "settings-page",
            "next": "tell-a-friend-confirm"
        },
        {
            "type": "select",
            "name": "tell-a-friend-confirm",
            "options": "confirm-options",
            "error": "tell-a-friend-confirm-error",
            "action": "transact",
            "external-fetch": {
                "route": "tell-a-friend",
                "success": "tell-a-friend-success",
                "error": "tell-a-friend-error"
            },
            "on-cancel": "client-page",
            "previous": "tell-a-friend-number"
        },
        {
            "type": "select",
            "name": "tell-a-friend-success",
            "options": "yes-no-options",
            "error": "tell-a-friend-success-error",
            "action": "navigate",
            "on-accept": "client-page",
            "on-cancel": "logout",
            "previous": "pesalink-page"
        },
        {
            "type": "select",
            "name": "tell-a-friend-error",
            "options": "yes-no-options",
            "error": "tell-a-friend-error-error",
            "action": "navigate",
            "on-accept": "client-page",
            "on-cancel": "logout",
            "previous": "pesalink-page"
        }
    ],
    "login-pin-change": [
        {
            "type": "input",
            "name": "login-pin-change-old-pin",
            "save-as": "oldPin",
            "format-as": "pin-hash",
            "transform-function": "hash_pin",
            "validation": [
                {
                    "name": "isCorrectPin",
                    "type": "custom"
                }
            ],
            "error": "login-pin-change-wrong-old-pin-error",
            "previous": "login-page",
            "next": "login-pin-change-new-pin"
        },
        {
            "type": "input",
            "name": "login-pin-change-new-pin",
            "save-as": "newPin",
            "transform-function": "hash_pin",
            "validation": [
                {
                    "name": "isStrongPin",
                    "type": "custom"
                },
                {
                    "name": "isNotEqualToLastEntry",
                    "type": "custom",
                    "arguments": {
                        "path": "oldPin"
                    }
                }
            ],
            "errors": [
                "login-pin-change-new-pin-error",
                "login-pin-change-new-pin-not-last-entry-error"
            ],
            "previous": "login-pin-change-old-pin",
            "next": "login-pin-change-new-pin-reenter"
        },
        {
            "type": "input",
            "name": "login-pin-change-new-pin-reenter",
            "save-as": "newPin",
            "format-as": "pin-hash",
            "validation": [
                {
                    "name": "isEqualToLastEntry",
                    "type": "custom",
                    "arguments": {
                        "path": "newPin"
                    }
                }
            ],
            "error": "login-pin-change-new-pin-reenter-error",
            "previous": "login-pin-change-new-pin",
            "next": "login-pin-change-confirm"
        },
        {
            "type": "select",
            "name": "login-pin-change-confirm",
            "options": "confirm-options",
            "error": "login-pin-change-confirm-error",
            "authenticate": false,
            "action": "transact",
            "external-fetch": {
                "route": "pin-change",
                "success": "pin-change-success",
                "error": "pin-change-error"
            },
            "on-cancel": "login-page",
            "previous": "login-pin-change-new-pin-reenter"
        }
    ],
    "apply-overdraft": [
        {
            "type": "skip",
            "name": "fetch-linked-account-apply-overdraft",
            "action": "update-parameters",
            "external-fetch": {
                "route": "fetch_linked_sidian_account",
                "success": "linked-account-apply-overdraft",
                "error": "api-error",
                "cache": true,
                "cache-path": "global-request-details",
                "cache-parameters": [
                    {
                        "path": "myData",
                        "save-as": "sidianLinkedAccount",
                        "format-as": ""
                    }
                ]
            }
        },
        {
            "type": "select",
            "name": "linked-account-apply-overdraft",
            "save-as": "sidianAccount",
            "options": "sidianLinkedAccount",
            "options-error": "api-error",
            "error": "linked-account-apply-overdraft-error",
            "next": "apply-overdraft-amount",
            "previous": "client-page",
            "parameter-checks": {
                "odActiveValue": {
                    "is-less-than": "0",
                    "redirect-to": "apply-overdraft-odActive"
                }
            }
        },
        {
            "type": "select",
            "name": "apply-overdraft-odActive",
            "options": "yes-no-options",
            "error": "apply-overdraft-odActive-error",
            "action": "navigate",
            "on-accept": "client-page",
            "on-cancel": "logout"
        },
        {
            "type": "input",
            "name": "apply-overdraft-amount",
            "save-as": "overdraftAmount",
            "error": "apply-overdraft-amount-error",
            "previous": "linked-account-apply-overdraft",
            "next": "apply-overdraft-confirm",
            "validation": [
                {
                    "type": "custom",
                    "name": "isAmount"
                },
                {
                    "name": "isWithinLimit",
                    "type": "custom",
                    "arguments": "min=1000, max=%@accountLimit"
                }
            ]
        },
        {
            "type": "select",
            "name": "apply-overdraft-confirm",
            "options": "confirm-options",
            "error": "apply-overdraft-confirm-error",
            "on-cancel": "logout",
            "authenticate": true,
            "action": "transact",
            "external-fetch": {
                "route": "apply-overdraft",
                "success": "api-success",
                "error": "api-error",
                "cache": false,
                "cache-path": "global-request-details",
                "cache-parameters": []
            }
        }
    ],
    "pin-change-error": {
        "type": "alert",
        "name": "pin-change-error"
    },
    "api-message-error": {
        "type": "alert",
        "name": "api-message-error"
    },
    "registration": [
        {
            "type": "input",
            "name": "registration-id",
            "save-as": "nationalId",
            "validation": [
                {
                    "name": "isValidPin",
                    "type": "custom"
                }
            ],
            "error": "registration-id-error",
            "next": "fetch-linked-sidian-account-registration",
            "action": "update-parameters",
            "external-fetch": {
                "route": "id-look-up-request",
                "success": "fetch-linked-sidian-account-registration",
                "error": "api-message-error",
                "cache": false,
                "cache-path": "global-request-details",
                "cache-parameters": []
            }
        },
        {
            "type": "skip",
            "name": "fetch-linked-sidian-account-registration",
            "action": "update-parameters",
            "external-fetch": {
                "route": "fetch-accounts-presentment",
                "success": "registration-core-account",
                "error": "api-message-error",
                "cache": true,
                "cache-path": "global-request-details",
                "cache-parameters": [
                    {
                        "path": "myData",
                        "save-as": "sidianLinkedAccount",
                        "format-as": ""
                    }
                ]
            }
        },
        {
            "type": "select",
            "name": "registration-core-account",
            "save-as": "sidianAccount",
            "options": "sidianLinkedAccount",
            "options-error": "api-message-error",
            "error": "registration-core-account-error",
            "next": "registration-confirm",
            "previous": "registration-id"
        },
        {
            "type": "select",
            "name": "registration-confirm",
            "options": "confirm-options",
            "error": "registration-confirm-error",
            "authenticate": false,
            "action": "transact",
            "external-fetch": {
                "route": "registration",
                "success": "registration-success",
                "error": "self-registration-error"
            },
            "on-cancel": "registration-cancel",
            "previous": "registration-core-account"
        },
        {
            "type": "alert",
            "name": "self-registration-error"
        }
    ],
    "opt-in-overdraft": [
        {
            "type": "skip",
            "name": "fetch_linked_sidian_account",
            "action": "update-parameters",
            "external-fetch": {
                "route": "fetch_linked_sidian_account",
                "success": "opt-in-od-core-account",
                "error": "api-error",
                "cache": true,
                "cache-path": "global-request-details",
                "cache-parameters": [
                    {
                        "path": "myData",
                        "save-as": "sidianLinkedAccount",
                        "format-as": ""
                    }
                ]
            }
        },
        {
            "type": "select",
            "name": "opt-in-od-core-account",
            "save-as": "sidianAccount",
            "options": "sidianLinkedAccount",
            "options-error": "api-error",
            "error": "opt-in-od-core-account-error",
            "next": "opt-in-od-details",
            "previous": "client-page"
        },
        {
            "type": "select",
            "name": "opt-in-od-details",
            "save-as": "acceptToOverDraft",
            "options": [
                {
                    "label": "Confirm Opt-in",
                    "value": "Confirm Opt-in",
                    "jump-to": "fetch-confirm-od-limit"
                },
                {
                    "label": "Change Limit",
                    "value": "Change Limit",
                    "jump-to": "new-overdraft-limit"
                },
                {
                    "label": "Back",
                    "value": "Back",
                    "jump-to": "client-page"
                }
            ],
            "error": "opt-in-od-details-error",
            "previous": "client-page",
            "next": "client-page"
        },
        {
            "type": "skip",
            "name": "fetch-confirm-od-limit",
            "action": "update-parameters",
            "external-fetch": {
                "route": "opt-in-od",
                "success": "opt-in-od-success",
                "error": "api-error",
                "cache": true,
                "cache-path": "global-request-details",
                "cache-parameters": [
                    {
                        "path": "data.version",
                        "save-as": "version",
                        "format-as": ""
                    }
                ]
            }
        },
        {
            "type": "alert",
            "name": "opt-in-od-success"
        },
        {
            "type": "input",
            "name": "new-overdraft-limit.",
            "save-as": "overdraftLimitAmount",
            "error": "new-overdraft-limit.-error",
            "previous": "opt-in-overdraft",
            "next": "change-overdraft-limit-success",
            "validation": [
                {
                    "type": "custom",
                    "name": "isAmount"
                }
            ]
        },
        {
            "type": "alert",
            "name": "change-overdraft-limit-success"
        }
    ],
    "check-od-limit": [
       
            {
                "type": "skip",
                "name": "fetch-od-limit-accounts",
                "action": "update-parameters",
                "external-fetch": {
                    "route": "fetch_linked_sidian_account",
                    "success": "check-od-limit-od-core-account",
                    "error": "api-error",
                    "cache": true,
                    "cache-path": "global-request-details",
                    "cache-parameters": [
                        {
                            "path": "myData",
                            "save-as": "sidianLinkedAccount",
                            "format-as": ""
                        }
                    ]
                }
            },
            {
                "type": "select",
                "name": "check-od-limit-od-core-account",
                "save-as": "sidianAccount",
                "options": "sidianLinkedAccount",
                "options-error": "api-error",
                "error": "check-od-limit-od-core-account",
                "next": "check-od-limit-balance",
                "previous": "client-page"
            },
        {
            "type": "select",
            "name": "check-od-limit-balance",
            "options": "yes-no-options",
            "error": "check-od-limit-balance-error",
            "action": "navigate",
            "on-accept": "client-page",
            "on-cancel": "logout"
        }
    ],
    "api-success": {
        "type": "select",
        "name": "api-success",
        "options": "yes-no-options",
        "error": "api-success-error",
        "action": "navigate",
        "on-accept": "client-page",
        "on-cancel": "logout"
    },
    "check-overdraft-balance": [
       
        {
            "type": "skip",
            "name": "fetch-overdraft-balance-accounts",
            "action": "update-parameters",
            "external-fetch": {
                "route": "fetch_linked_sidian_account",
                "success": "check-overdraft-balance-core-account",
                "error": "api-error",
                "cache": true,
                "cache-path": "global-request-details",
                "cache-parameters": [
                    {
                        "path": "myData",
                        "save-as": "sidianLinkedAccount",
                        "format-as": ""
                    }
                ]
            }
        },
        {
            "type": "select",
            "name": "check-overdraft-balance-core-account",
            "save-as": "sidianAccount",
            "options": "sidianLinkedAccount",
            "options-error": "api-error",
            "error": "check-overdraft-balance-core-account",
            "next": "check-overdraft-balance-balance",
            "previous": "client-page"
        },
    {
        "type": "select",
        "name": "check-overdraft-balance-balance",
        "options": "yes-no-options",
        "error": "check-overdraft-balance-balance-error",
        "action": "navigate",
        "on-accept": "client-page",
        "on-cancel": "logout"
    }
],
    "balance-success": {
        "type": "select",
        "name": "balance-success",
        "options": "yes-no-options",
        "error": "balance-success-error",
        "action": "navigate",
        "on-accept": "client-page",
        "on-cancel": "logout"
    },
    "pin-change-success": {
        "type": "alert",
        "name": "pin-change-success"
    },
    "transaction-login": {
        "type": "input",
        "name": "transaction-login",
        "next": "client-page",
        "validation": [
            {
                "name": "isValidPin",
                "type": "custom"
            }
        ],
        "error": "transaction-login",
        "transaction-auth": {
            "success": "client-page",
            "success-handler": {
                "handler": "reset_pin_trials",
                "argument": "transaction-pin-trials-remaining",
                "save-as": "transaction-pin-trials-remaining"
            },
            "error": "transaction-login",
            "error-handler": {
                "handler": "decrement_pin_trials",
                "argument": "transaction-pin-trials-remaining",
                "save-as": "transaction-pin-trials-remaining",
                "threshold": 0,
                "redirect-on-threshold": "account-blocked",
                "threshold-handler": "block-account"
            },
            "cache": true
        },
        "on-cancel": "logout",
        "previous": "client-page"
    },
    "registration-cancel": {
        "type": "alert",
        "name": "registration-cancel"
    },
    "imsi-check-failed": {
        "type": "alert",
        "name": "imsi-check-failed"
    },
    "request-invoice-discount": [
        {
            "type": "select",
            "name": "request-invoice-discount-select-client",
            "save-as": "invoiceClient",
            "options": [
                {
                    "label": "Safaricom",
                    "value": "SAFARICOM"
                }
            ],
            "error": "request-invoice-discount-select-client-error",
            "previous": "client-page",
            "next": "request-invoice-discount-available-invoice"
        },
        {
            "type": "select",
            "name": "request-invoice-discount-available-invoice",
            "save-as": "invoiceAccount",
            "options": [
                {
                    "label": "LPO-00002",
                    "value": "LPO-00002"
                }
            ],
            "error": "request-invoice-discount-available-invoice-error",
            "previous": "request-invoice-discount-select-client",
            "next": "request-invoice-discount-request-amount"
        },
        {
            "type": "input",
            "name": "request-invoice-discount-request-amount",
            "save-as": "invoiceAmountToRequest",
            "error": "request-invoice-discount-request-amount-error",
            "previous": "request-invoice-discount-due-date",
            "next": "request-invoice-discount-confirm",
            "validation": [
                {
                    "type": "custom",
                    "name": "isAmount"
                }
            ]
        },
        {
            "type": "select",
            "name": "request-invoice-discount-confirm",
            "options": "confirm-options",
            "error": "request-invoice-discount-confirm-error",
            "on-cancel": "logout",
            "previous": "request-invoice-discount-request-amount",
            "action": "transact",
            "external-fetch": {
                "route": "take-loan",
                "success": "api-success",
                "error": "api-success"
            }
        }
    ],
    "supplier-view-account-balance": [
        {
            "type": "select",
            "name": "supplier-view-account-balance",
            "options": "yes-no-options",
            "error": "supplier-view-account-balance-error",
            "action": "navigate",
            "on-accept": "client-page",
            "on-cancel": "logout"
        }
    ],
    "buy-airtime": [
        {
            "type": "select",
            "name": "buy-airtime-provider",
            "save-as": "airtimeProvider",
            "options": [
                {
                    "label": "Safaricom",
                    "value": "SAFARICOM"
                },
                {
                    "label": "Airtel",
                    "value": "AIRTEL"
                },
                {
                    "label": "Telkom",
                    "value": "TELKOM"
                }
            ],
            "error": "buy-airtime-provider-error",
            "next": "buy-airtime-account-type",
            "previous": "client-page"
        },
        {
            "type": "select",
            "name": "buy-airtime-account-type",
            "save-as": "airtimeCreditAccount",
            "options": [
                {
                    "label": "My Phone",
                    "value": "__walletAccount",
                    "jump-to": "buy-airtime-debit-account"
                },
                {
                    "label": "Other Phone",
                    "jump-to": "buy-airtime-credit-account"
                }
            ],
            "error": "buy-airtime-account-type-error",
            "previous": "buy-airtime-provider"
        },
        {
            "type": "input",
            "name": "buy-airtime-credit-account",
            "save-as": "airtimeCreditAccount",
            "format-as": "international-mobile-number",
            "validation": [
                {
                    "name": "matchesLength",
                    "type": "joi",
                    "arguments": {
                        "length": 10
                    }
                },
                {
                    "name": "isNumber",
                    "type": "joi"
                }
            ],
            "errors": [
                "buy-airtime-credit-account-error",
                "buy-airtime-credit-account-error"
            ],
            "previous": "buy-airtime-account-type",
            "next": "buy-airtime-debit-account"
        },
        {
            "type": "select",
            "name": "buy-airtime-debit-account",
            "save-as": "airtimeDebitAccount",
            "options": [
                {
                    "label": "Account 1",
                    "value": "Account 1"
                },
                {
                    "label": "Account 1",
                    "value": "Account 1"
                }
            ],
            "options-error": "buy-airtime-debit-account-options-error",
            "error": "buy-airtime-debit-account-error",
            "previous": "buy-airtime-provider",
            "next": "buy-airtime-amount"
        },
        {
            "type": "input",
            "name": "buy-airtime-amount",
            "save-as": "airtimeAmount",
            "validation": [
                {
                    "name": "isAmount",
                    "type": "joi",
                    "arguments": {
                        "min": 10
                    }
                }
            ],
            "format-as": "",
            "error": "buy-airtime-amount-error",
            "previous": "buy-airtime-debit-account",
            "next": "buy-airtime-confirm"
        },
        {
            "type": "select",
            "name": "buy-airtime-confirm",
            "options": "confirm-options",
            "charges": true,
            "error": "buy-airtime-confirm-error",
            "action": "transact",
            "external-fetch": {
                "route": "buy-airtime",
                "success": "api-success",
                "error": "api-success"
            },
            "on-cancel": "client-page",
            "previous": "buy-airtime-amount"
        },
        {
            "type": "select",
            "name": "buy-airtime-debit-account-options-error",
            "options": "yes-no-options",
            "error": "buy-airtime-debit-account-options-error-error",
            "action": "navigate",
            "on-accept": "client-page",
            "on-cancel": "logout",
            "previous": "balance-account"
        }
    ]
}