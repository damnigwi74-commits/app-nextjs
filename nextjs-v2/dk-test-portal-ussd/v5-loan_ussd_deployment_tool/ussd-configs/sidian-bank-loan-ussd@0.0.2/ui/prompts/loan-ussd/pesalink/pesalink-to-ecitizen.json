[
	{
        "type"          : "input",
        "name"          : "ecitizen-paybill-number",
        "save-as"       : "ecitizenpaybill",
        "validation"    : [
            {
				"name"     : "isNumber",
				"type"     : "joi"
            }
        ],
        "error"         : "ecitizen-paybill-number-error",
        "previous"      : "pesalink-page",
		"action"        : "update-parameters",		
        "external-fetch": {
            "route"              : "pesalink-to-ecitizen-lookup",
            "success"            : "pesalink-to-ecitizen-lookup-banks",
			"error"              : "pesalink-to-ecitizen-lookup-error",
			"cache"              : true,
			"cache-path"         : "global-request-details",
			"cache-parameters"   : [
				{
					"path"       : "data",
					"save-as"    : "ROOT",
					"format-as"  : "citizenlookup",
					"error"      : "pesalink-to-ecitizen-lookup-error"	
				}
			]
        }
	},
	{
        "type"          : "select",
        "name"          : "pesalink-to-ecitizen-debit-account",
        "save-as"       : "debitAccount",
		"options"       : "savings-accounts",		
		"options-error" : "pesalink-to-ecitizen-debit-account-options-error",
        "error"         : "pesalink-to-ecitizen-debit-account-error",
		"previous"      : "ecitizen-reference-number",
		"next"          : "pesalink-to-ecitizen-confirm"
		
	},

	{
        "type"          : "select",
        "name"          : "pesalink-to-ecitizen-lookup-banks",
        "save-as"       : "sortcode",
		"options"       : "pesalink-ecitizen-lookup-result",		
		"options-error" : "pesalink-to-ecitizen-lookup-banks-options-error",
        "error"         : "pesalink-to-ecitizen-lookup-banks-error",
		"previous"      : "ecitizen-paybill-number",
		"next"          : "pesalink-to-ecitizen-amount"
	},

	{
        "type"          : "input",
        "name"          : "pesalink-to-ecitizen-amount",
        "save-as"       : "amount",
        "validation"    : [
            {
				"name"     : "isAmount",
				"type"     : "joi",
				"arguments": "min = 1"
            }
        ],
        "error"         : "pesalink-to-ecitizen-amount-error",
        "previous"      : "pesalink-to-ecitizen-lookup-banks",
		"next"          : "ecitizen-reference-number"
	},
	{
        "type"          : "input",
        "name"          : "ecitizen-reference-number",
		"save-as"       : "reference",
		"validation"    : [
            {
				"name"     : "isValidPin",
				"type"     : "custom"
            }
        ],
        "error"         : "ecitizen-reference-number-error",
        "previous"      : "pesalink-to-ecitizen-amount",
		"action"        : "update-parameters",		
        "external-fetch": {
            "route"              : "reference-to-ecitizen-lookup",
            "success"            : "pesalink-to-ecitizen-debit-account",
			"error"              : "pesalink-to-ecitizen-reference-error",
			"cache"              : true,
			"cache-path"         : "global-request-details",
			"cache-parameters"   : [
				{
					"path"       : "data.refNumber",
					"save-as"    : "numberRef"
				}
			]
        }
	},

    {
        "type"          : "select",
        "name"          : "pesalink-to-ecitizen-confirm",
		"options"       : "confirm-options",
		"charges"       : true,
        "error"         : "pesalink-to-ecitizen-confirm-error",
        "action"        : "transact",
        "external-fetch": {
            "route"     : "pesalink-to-ecitizen",
            "success"   : "pesalink-to-ecitizen-success",
			"error"     : "api-error",
			"cache"              : true,
			"cache-path"         : "global-request-details",
			"cache-parameters"   : [
				{
					"path"       : "field48",
					"save-as"    : "zenmessage"
				}
			]
        },
        "on-cancel"     : "client-page",
        "previous"      : "pesalink-to-ecitizen-debit-account"
	},
	{
		"type"          : "select",
		"name"          : "pesalink-to-ecitizen-success",
		"options"       : "yes-no-options",
		"error"         : "pesalink-to-ecitizen-success-error",
		"action"        : "navigate",
		"on-accept"     : "client-page",
		"on-cancel"     : "logout",
		"previous"      : "pesalink-page"
	},
	{
		"type"          : "select",
		"name"          : "pesalink-to-ecitizen-debit-account-options-error",
		"options"       : "yes-no-options",
		"error"         : "pesalink-to-ecitizen-debit-account-options-error-error",
		"action"        : "navigate",
		"on-accept"     : "client-page",
		"on-cancel"     : "logout",
		"previous"      : "pesalink-page"
	},
	{
		"type"          : "select",
		"name"          : "pesalink-to-ecitizen-lookup-error",
		"options"       : "yes-no-options",
		"error"         : "pesalink-to-ecitizen-lookup-error-error",
		"action"        : "navigate",
		"on-accept"     : "pesalink-page",
		"on-cancel"     : "logout",
		"previous"      : "ecitizen-paybill-number"
	},
	{
		"type"          : "select",
		"name"          : "pesalink-to-ecitizen-reference-error",
		"options"       : "yes-no-options",
		"error"         : "pesalink-to-ecitizen-reference-error-error",
		"action"        : "navigate",
		"on-accept"     : "pesalink-page",
		"on-cancel"     : "logout",
		"previous"      : "ecitizen-reference-number"
	},
	{
		"type"          : "select",
		"name"          : "pesalink-to-ecitizen-lookup-banks-options-error",
		"options"       : "yes-no-options",
		"error"         : "pesalink-to-ecitizen-lookup-banks-options-error-error",
		"action"        : "navigate",
		"on-accept"     : "client-page",
		"on-cancel"     : "logout",
		"previous"      : "pesalink-to-ecitizen-debit-account"
	}
	
]