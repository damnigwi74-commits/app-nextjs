[
  {
    "type": "select",
    "name": "to-mobile-money-provider",
    "save-as": "telcoProvider",
    "options": [
      {
        "label": "MPESA",
        "value": "Mpesa",
        "meta": [
          {
              "save-as": "balanceForWallet",
              "cache-path": "global-request-details",
              "value": "100000"
          },
          {
              "save-as": "mobileMoneyAccount",
              "cache-path": "global-request-details",
              "value": "__walletAccount"
          },
          {
              "save-as": "cashOutSuccess",
              "cache-path": "global-request-details",
              "value": "Your request was received and is being processed."
          }
        ]
      },
      {
        "label": "Airtel-Money",
        "value": "Airtel-Money",
        "meta": [
          {
              "save-as": "balanceForWallet",
              "cache-path": "global-request-details",
              "value": "100000"
          },
          {
              "save-as": "mobileMoneyAccount",
              "cache-path": "global-request-details",
              "value": "__walletAccount"
          },
          {
              "save-as": "cashOutSuccess",
              "cache-path": "global-request-details",
              "value": "Your request was received and is being processed."
          }
        ]
      }
    ],
    "error": "to-mobile-money-provider-error",
    "next": "to-mobile-money-amount-self",
    "previous": "client-page"
  },
  {
    "type": "select",
    "name": "to-mobile-money-account-type",
    "save-as": "mobileMoneyAccount",
    "options": [
      {
        "label": "My Phone",
        "value": "__walletAccount",
        "jump-to": "to-mobile-money-amount-self"
      },
      {
        "label": "Enter Phone",
        "jump-to": "to-mobile-money-credit-account"
      }
    ],
    "error": "to-mobile-money-account-type-error",
    "previous": "client-page"
  },
  {
    "type": "input",
    "name": "to-mobile-money-credit-account",
    "save-as": "mobileMoneyAccount",
    "validation": [
      {
        "name": "isNumber",
        "type": "joi"
      },
      {
        "name": "matchesLength",
        "type": "joi",
        "arguments": "length=10"
      }
    ],
    "format-as":"mobile-number",
    "error": "to-mobile-money-credit-account-error",
    "previous": "to-mobile-money-account-type",
    "next": "to-mobile-money-amount"
  },
  {
    "type": "input",
    "name": "to-mobile-money-amount",
    "save-as": "loanAmount",
    "validation": [
      {
        "name": "isWithinLoanLimit",
        "type": "custom",
        "arguments": "min=%@minimumWithdrawLimit, max=%@balanceForWallet"
      }
    ],
    "error": "to-mobile-money-amount-error",
    "previous": "to-mobile-money-account-type",
    "next": "to-mobile-money-confirm"
  },
  {
    "type": "input",
    "name": "to-mobile-money-amount-self",
    "save-as": "loanAmount",
    "validation": [
      {
        "name": "isWithinLoanLimit",
        "type": "custom",
        "arguments": "min=%@minimumWithdrawLimit, max=%@balanceForWallet"
      }
    ],
    "error": "to-mobile-money-amount-self-error",
    "previous": "to-mobile-money-account-type",
    "next": "to-mobile-money-confirm-self"
  },
  {
    "type": "select",
    "name": "to-mobile-money-confirm",
    "options": "confirm-options",
    "error": "to-mobile-money-confirm-error",
    "action": "transact",
    "external-fetch": {
      "route": "to-mobile-money-loan-cash-out",
      "success": "to-mobile-money-api-success",
      "error": "to-mobile-money-api-success",
      "cache": true,
      "cache-path": "global-request-details",
      "cache-parameters": [
        {
          "path": "message",
          "save-as": "cashOutSuccess"
        }
      ]
    },
    "on-cancel": "client-page",
    "previous": "to-mobile-money-amount"
  },
  {
    "type": "select",
    "name": "to-mobile-money-confirm-self",
    "options": "confirm-options",
    "error": "to-mobile-money-confirm-self-error",
    "action": "transact",
    "external-fetch": {
      "route": "to-mobile-money-loan-cash-out-self",
      "success": "to-mobile-money-api-success",
      "error": "to-mobile-money-api-success",
      "cache": true,
      "cache-path": "global-request-details",
      "cache-parameters": [
        {
          "path": "message",
          "save-as": "cashOutSuccess"
        }
      ]
    },
    "on-cancel": "client-page",
    "previous": "to-mobile-money-amount-self"
  },
  {
    "type"      : "select",
    "name"      : "to-mobile-money-api-success",
    "options"   : "yes-no-options",
    "error"     : "-to-mobile-money-api-success-error",
    "action"    : "navigate",
    "on-accept" : "client-page",
    "on-cancel" : "logout"    
}
]
